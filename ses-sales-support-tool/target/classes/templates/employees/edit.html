<!DOCTYPE html>
<html
  lang="ja"
  xmlns:th="http://www.thymeleaf.org"
  th:replace="~{layout :: layout(~{::title}, ~{::content})}"
>
  <head>
    <title>SES人員編集 - SES営業支援ツール</title>
  </head>
  <body>
    <div th:fragment="content">
      <!-- Page Header -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <h1 class="h3 mb-0"><i class="bi bi-pencil me-2"></i>SES人員編集</h1>
          <p class="text-muted mb-0">SES人員の情報を更新します</p>
        </div>
        <div>
          <a
            th:href="@{/employees/{id}(id=${employee.id})}"
            class="btn btn-outline-secondary me-2"
          >
            <i class="bi bi-eye me-1"></i>詳細
          </a>
          <a href="/employees" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-1"></i>一覧に戻る
          </a>
        </div>
      </div>

      <form
        th:action="@{/employees/{id}/edit(id=${employee.id})}"
        th:object="${employee}"
        method="post"
        class="needs-validation"
        novalidate
      >
        <div class="row">
          <!-- Basic Information -->
          <div class="col-lg-8">
            <div class="card mb-4">
              <div class="card-header">
                <h5 class="mb-0">基本情報</h5>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="firstName" class="form-label"
                      >姓 <span class="text-danger">*</span></label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="firstName"
                      th:field="*{firstName}"
                      required
                    />
                    <div class="invalid-feedback">姓を入力してください</div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="lastName" class="form-label"
                      >名 <span class="text-danger">*</span></label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="lastName"
                      th:field="*{lastName}"
                      required
                    />
                    <div class="invalid-feedback">名を入力してください</div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="email" class="form-label"
                      >メールアドレス <span class="text-danger">*</span></label
                    >
                    <input
                      type="email"
                      class="form-control"
                      id="email"
                      th:field="*{email}"
                      required
                    />
                    <div class="invalid-feedback">
                      有効なメールアドレスを入力してください
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="phone" class="form-label">電話番号</label>
                    <input
                      type="tel"
                      class="form-control"
                      id="phone"
                      th:field="*{phone}"
                      placeholder="090-1234-5678"
                    />
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12 mb-3">
                    <label for="address" class="form-label">住所</label>
                    <input
                      type="text"
                      class="form-control"
                      id="address"
                      th:field="*{address}"
                      placeholder="東京都渋谷区..."
                    />
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-4 mb-3">
                    <label for="employmentType" class="form-label"
                      >雇用形態</label
                    >
                    <select
                      class="form-select"
                      id="employmentType"
                      th:field="*{employmentType}"
                    >
                      <option value="">選択してください</option>
                      <option
                        th:each="type : ${employmentTypes}"
                        th:value="${type}"
                        th:text="${type}"
                      ></option>
                    </select>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="status" class="form-label">ステータス</label>
                    <select
                      class="form-select"
                      id="status"
                      th:field="*{status}"
                    >
                      <option
                        th:each="status : ${statuses}"
                        th:value="${status}"
                        th:text="${status}"
                      ></option>
                    </select>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="experienceYears" class="form-label"
                      >経験年数</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="experienceYears"
                      th:field="*{experienceYears}"
                      min="0"
                      max="50"
                    />
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="hourlyRate" class="form-label"
                      >時給（円）</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="hourlyRate"
                      th:field="*{hourlyRate}"
                      min="0"
                      step="100"
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="profile" class="form-label">プロフィール</label>
                    <textarea
                      class="form-control"
                      id="profile"
                      th:field="*{profile}"
                      rows="4"
                      placeholder="自己紹介、経験、特技などを記述してください"
                    ></textarea>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Sidebar -->
          <div class="col-lg-4">
            <!-- Save Actions -->
            <div class="card mb-4">
              <div class="card-header">
                <h5 class="mb-0">保存</h5>
              </div>
              <div class="card-body">
                <div class="d-grid gap-2">
                  <button type="submit" class="btn btn-primary">
                    <i class="bi bi-check-circle me-1"></i>更新
                  </button>
                  <a
                    th:href="@{/employees/{id}(id=${employee.id})}"
                    class="btn btn-outline-secondary"
                  >
                    <i class="bi bi-x-circle me-1"></i>キャンセル
                  </a>
                </div>
              </div>
            </div>

            <!-- Employee Info -->
            <div class="card mb-4">
              <div class="card-header">
                <h5 class="mb-0">登録情報</h5>
              </div>
              <div class="card-body">
                <dl class="row">
                  <dt class="col-sm-5">登録日</dt>
                  <dd
                    class="col-sm-7"
                    th:text="${#temporals.format(employee.createdAt, 'yyyy/MM/dd HH:mm')}"
                  ></dd>

                  <dt class="col-sm-5">更新日</dt>
                  <dd
                    class="col-sm-7"
                    th:text="${#temporals.format(employee.updatedAt, 'yyyy/MM/dd HH:mm')}"
                  ></dd>

                  <dt class="col-sm-5">登録者</dt>
                  <dd
                    class="col-sm-7"
                    th:text="${employee.createdBy != null ? employee.createdBy : 'システム'}"
                  ></dd>
                </dl>
              </div>
            </div>

            <!-- Help -->
            <div class="card">
              <div class="card-header">
                <h5 class="mb-0">入力のヒント</h5>
              </div>
              <div class="card-body">
                <ul class="list-unstyled mb-0">
                  <li class="mb-2">
                    <i class="bi bi-info-circle text-primary me-2"></i>
                    <strong>名前:</strong> フルネームで入力してください
                  </li>
                  <li class="mb-2">
                    <i class="bi bi-info-circle text-primary me-2"></i>
                    <strong>メール:</strong> 連絡先として使用されます
                  </li>
                  <li class="mb-2">
                    <i class="bi bi-info-circle text-primary me-2"></i>
                    <strong>経験年数:</strong>
                    実際の開発経験年数を入力してください
                  </li>
                  <li class="mb-2">
                    <i class="bi bi-info-circle text-primary me-2"></i>
                    <strong>時給:</strong> 希望時給を設定してください
                  </li>
                  <li>
                    <i class="bi bi-info-circle text-primary me-2"></i>
                    <strong>プロフィール:</strong>
                    スキルや経験を詳しく記述してください
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>

    <script>
      // Form validation
      (function () {
        "use strict";
        window.addEventListener(
          "load",
          function () {
            var forms = document.getElementsByClassName("needs-validation");
            var validation = Array.prototype.filter.call(
              forms,
              function (form) {
                form.addEventListener(
                  "submit",
                  function (event) {
                    if (form.checkValidity() === false) {
                      event.preventDefault();
                      event.stopPropagation();
                    }
                    form.classList.add("was-validated");
                  },
                  false
                );
              }
            );
          },
          false
        );
      })();
    </script>
  </body>
</html>

