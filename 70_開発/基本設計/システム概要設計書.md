# システム概要設計書

## 1. システム概要

### 1.1 システム名

SES 営業支援ツール

### 1.2 システム目的

SES 営業において、人員募集要項と SES 人員のスキルマッチ度を可視化し、営業担当者が適切な人員配置を判断できるツール

### 1.3 システム範囲

- 人員募集要項の入力・管理
- SES 人員のスキル情報管理
- スキルマッチング機能
- マッチング結果の可視化
- ユーザー認証・権限管理

## 2. システム構成

### 2.1 アーキテクチャ概要

```
┌─────────────────────────────────────────────────────────┐
│                Spring Boot Application (OCI)            │
│  ┌─────────────────┐    ┌─────────────────┐            │
│  │   Thymeleaf    │    │   Controllers   │            │
│  │   Templates    │◄──►│   Services      │            │
│  │   (Frontend)   │    │   (Backend)     │            │
│  └─────────────────┘    └─────────────────┘            │
│                              │                        │
│                              ▼                        │
│  ┌─────────────────┐    ┌─────────────────┐            │
│  │   PostgreSQL   │◄──►│   Spring Data   │            │
│  │   (Supabase)   │    │   JPA/Hibernate │            │
│  └─────────────────┘    └─────────────────┘            │
└─────────────────────────────────────────────────────────┘
```

### 2.2 技術スタック

- **フロントエンド**: Spring Boot + Thymeleaf
- **バックエンド**: Spring Boot (Java)
- **データベース**: PostgreSQL (Supabase)
- **認証**: Spring Security + JWT
- **リアルタイム**: WebSocket
- **デプロイ**: OCI (Oracle Cloud Infrastructure)

## 3. 機能構成

### 3.1 主要機能

1. **ユーザー管理機能**

   - ログイン・ログアウト
   - 権限管理
   - プロフィール管理

2. **人員募集要項管理機能**

   - 要項の登録・編集・削除
   - 技術要件の設定
   - 経験年数要件の設定

3. **SES 人員管理機能**

   - 人員情報の登録・編集・削除
   - スキル情報の管理
   - 習熟度の設定

4. **スキルマッチング機能**

   - 自動マッチング計算
   - マッチ度の可視化
   - 詳細分析の表示

5. **レポート機能**
   - マッチング結果の出力
   - 統計情報の表示

### 3.2 画面構成

- **ログイン画面** (`/login`)
- **ダッシュボード画面** (`/dashboard`)
- **人員募集要項管理画面** (`/job-requirements`)
- **SES 人員管理画面** (`/employees`)
- **スキルマッチング画面** (`/matching`)
- **レポート画面** (`/reports`)
- **ユーザー設定画面** (`/settings`)

## 4. データフロー

### 4.1 スキルマッチング処理フロー

```
1. Thymeleafフォームから要項入力
2. Controllerでリクエスト受信
3. Service層でビジネスロジック実行
4. Repository層でSupabase PostgreSQLからデータ取得
5. スキル評価ロジック実行
6. マッチ度計算
7. Thymeleafテンプレートで結果表示
8. 詳細分析生成
```

### 4.2 データ連携

- **入力**: Thymeleaf フォームからの人員募集要項、SES 人員情報
- **処理**: Spring Boot Service 層でのスキルマッチングアルゴリズム
- **データベース**: Supabase PostgreSQL
- **出力**: Thymeleaf テンプレートでのマッチ度表示、詳細分析、レポート

## 5. セキュリティ設計

### 5.1 認証・認可

- **認証方式**: Spring Security + JWT
- **認可**: Spring Security のロールベース認可
- **セッション管理**: Spring Security のセッション管理

### 5.2 データ保護

- **暗号化**: HTTPS 通信、Supabase PostgreSQL 暗号化
- **アクセス制御**: Spring Security による認証・認可
- **ログ管理**: Spring Boot Actuator + 操作ログの記録・監視

## 6. パフォーマンス設計

### 6.1 レスポンス時間

- **目標**: 3 秒以内
- **同時アクセス**: 10 ユーザーまで

### 6.2 スケーラビリティ

- **水平スケーリング**: OCI の自動スケーリング + Supabase PostgreSQL
- **キャッシュ**: Spring Cache + Thymeleaf キャッシュ
- **最適化**: Spring Data JPA + データベースクエリ最適化

## 7. 運用設計

### 7.1 監視・ログ

- **アプリケーションログ**: Spring Boot Actuator + Logback
- **エラー監視**: Spring Boot Actuator Health Check
- **パフォーマンス監視**: Spring Boot Actuator Metrics

### 7.2 バックアップ・復旧

- **データバックアップ**: Supabase 自動バックアップ
- **アプリケーションバックアップ**: OCI 自動スナップショット
- **復旧時間**: 4 時間以内
- **データ保持期間**: 30 日間

## 8. 開発・運用環境

### 8.1 開発環境

- **ローカル開発**: Spring Boot + Supabase PostgreSQL
- **テスト環境**: Spring Boot Test + Supabase Test Project
- **本番環境**: OCI + Supabase Production Project

### 8.2 CI/CD

- **バージョン管理**: Git
- **自動デプロイ**: GitHub Actions + OCI
- **テスト**: JUnit 5 + Mockito + TestContainers
- **ビルド**: Maven + Spring Boot Maven Plugin
